<?xml version="1.0"?>
<launch>

    <arg name="vision"      value="false" />
    <arg name="real"        default="true" />
    <arg name="nav_stack"   default="true"/>
    <arg name="show_rviz"   default="true"/>
    <arg name="use_pid"     default="yes"/>

    <include file="$(find wheelchair_iaslab_odometry)/launch/odometry.launch" >            <!-- odometry               -->
        <arg name="real"   value="$(arg real)" />
    </include>

    <group if="$(arg real)">
        <!-- HW -->
        <include file="$(find wheelchair_iaslab_sensors)/launch/sensors_setup.launch"/>        <!-- initialize the sensors -->
        <include file="$(find wheelchair_iaslab_description)/launch/urdf_sensor.launch"/>      <!-- initialize the urdf    -->
        <!-- <include file="$(find ros_rnet_node)/launch/serial_rnet.launch"/> -->             <!-- Anita controller       -->

        <!-- CAN controller
        <node name="wheelchair_can" pkg="wheelchair_iaslab_control_can" type="wheelchair_controller" output="screen" required="true">
            <param name="can_interface" value="can0"/>
        </node> -->
                
        <!-- Connection to the Multiplexer for the cmd execution -->
        <include file="$(find wheelchair_iaslab_control)/launch/control.launch">
            <arg name="use_pid"   value="$(arg use_pid)" />
        </include>
    </group>

    <!-- joy node  -->
    <node name="joyconnetion" pkg="joy" type="joy_node" /> 

    <!-- Navigation stack  -->
    <group if="$(arg nav_stack)">
        <include file="$(find wheelchair_iaslab_init)/launch/potential.launch"/>
    </group>

    <group if="$(arg vision)">
        <!-- Connection with vision  -->
        <node name="rameez_vision" pkg="wheelchair_iaslab_init" type="launch_visoin.py" />     <!-- Start the rameez pipeline -->   
        <include file="$(find camera)/launch/apriltag.launch"/>                                <!-- Detect the apriltag       -->
    </group>

    <!-- Record the interested data  
    <include file="$(find wheelchair_iaslab_init)/launch/recored.launch"/> -->

    <!-- RVIZ  -->
    <group if="$(arg show_rviz)">
        <node name="rviz" pkg="rviz" type="rviz" args="-d $(find wheelchair_iaslab_sensors)/rviz/c.rviz" required="true"/>
    </group>

</launch>
